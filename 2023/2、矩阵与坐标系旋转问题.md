
## 问题引入

最近在遇到这样一个问题，觉得很有意思，记录下心路历程。

需求很简单，即在页面中有一块地图区域，地图可以根据其中心点旋转，需要根据鼠标在地图上划过的位置绘制一个矩形，旋转后，要求绘制的矩形对用户来说还在正的(即矩形不旋转)，

## 分析问题

从上述问题分析可以的得出三个已知条件，鼠标的起点A(x, y)，鼠标终点B(m,n)以及地图旋转角Θ。

首先当地图未旋转时绘制矩形，其四个点坐标为A(x,y)，B(m,n)，C(x,n)，D(m, y)，当地图旋转后，其坐标系也旋转了，所以四个点相对改坐标系来说，位置没有发生变化，现在只需要将其旋转摆正即可。

## 旋转矩形

我们已知坐标系旋转了角Θ，那么是不是将矩阵绕某点反向旋转角Θ即可摆正了呢？确实这里可以绕矩形四个点或对角线交点旋转-Θ，即可将矩形摆正（其实这种思路是有问题的，后续会给出正确做法）。

这里我们绕左上角旋转-Θ，计算出其余几个点坐标即可绘制出旋转后的矩形
